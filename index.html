<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->
    <link rel="stylesheet" href="main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <title>HackRoute</title>
    <link rel="icon" href="https://hc-cdn.hel1.your-objectstorage.com/s/v3/0aafc493a7318c717fb8c07c0268e5bdc514677a_digital__transit__transparent_.svg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script type="text/javascript" src="brython.js"></script>
    <script type="text/javascript" src="brython_stdlib.js"></script>
</head>
<body onload="brython()">
    <div class="min-h-screen bg-[#111111] border-[12px] border-black">
        <div class="text-yellow-500"></div>
        <div class="bg-blue-500 flex items-center mx-auto my-6 max-w-[97%] rounded-lg shadow-lg p-4">
            <img src="https://hc-cdn.hel1.your-objectstorage.com/s/v3/4d38a9f9b4ffbf1c1054517b8ddbf77553d0aabe_monochrome__transit__transparent_.svg" 
                width="80" 
                alt="Hack Club logo with the words transit underneath">
            <h1 class="text-white text-6xl font-bold font-['Inter'] px-20">
                HackRoute Plaza
            </h1>
        </div>
            <div class="flex justify-between border-b border-gray-600 px-4 m-4">
            <h1 class="bg-[#111111] text-white text-2xl font-['Inter'] font-semibold tracking-tight">
                Next Trains
            </h1>
            <h1 class="bg-[#111111] text-white text-2xl font-['Inter'] font-semibold tracking-tight">
                Status
            </h1>
        </div>
        <div class="bg-blue-500 flex items-center mx-auto my-6 max-w-[97%] rounded-lg shadow-lg p-4">
            <img 
                width="140"
                class="ml-16"
                id="icon-1">
            <div class="flex flex-col ml-20">
                <h1 id="direction-1" class="text-white text-4xl font-semibold font-['inter']">
                    
                </h1>
                <h1 class="text-white font-semibold font-['inter']" id="towards-1">
                    
                </h1>
            </div>
            <div class="flex flex-col ml-auto">
                <h1 class="text-white font-semibold font-['inter'] text-4xl text-right" id="status-1">
                     
                </h1>
                <h1 class="text-white font-semibold font-['inter'] text-right" id="status-extra-1">
                    
                </h1>
            </div>
        </div>
        <h1 class="bg-[#111111] text-white text-2xl font-['Inter'] font-semibold tracking-tight px-4 m-4 border-b border-gray-600">
            Station Alerts
        </h1>
        <div class="flex-row">
            <div class="flex-col">
                <div class="px-4 m-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <i class="fa-solid fa-circle-info text-yellow-500 text-4xl"></i>
                            <h1 class="text-white font-bold font-['inter'] text-6xl">
                                HackRoute
                            </h1>
                        </div>
                        <button class="text-3xl bg-blue-500 hover:bg-blue-400 text-white font-bold py-4 px-20 border-b-4 border-blue-700 hover:border-blue-500 rounded" onclick="window.open('https://hackroute.fillout.com/rsvp')" >
                            RSVP now!
                        </button>
                    </div>
                    
                    <h1 class="text-white font-regular font-['inter'] text-[clamp(1.25rem,2vw,2.25rem)] text-left">
                        A Transit Oriented YSWS
                    </h1>
                </div>
                <div class="px-4 m-4">
                    <h1 class="text-white font-regular font-['inter'] text-[clamp(1.25rem,2vw,2.25rem)] text-left">
                        YS: A minigame that uses public transit! (or planes)
                    </h1>
                    <h1 class="text-white font-regular font-['inter'] text-[clamp(1.25rem,2vw,2.25rem)] text-left">
                        WS: Transit merch (or even HackRoute merch... :3)
                    </h1>
                </div>
            </div>
            <div class="px-4 m-4">
                <h1 class="text-white font-regular font-['inter'] text-[clamp(1.25rem,2vw,2.25rem)] text-left ">
                    <b>Starts:</b> Coming soon™
                </h1>
                <h1 class="text-white font-regular font-['inter'] text-[clamp(1.25rem,2vw,2.25rem)] text-left">
                    <b>Ends:</b> Coming soon™
                </h1>
            </div>
            <div class="px-4 m-4">
                <h1 class="text-white font-regular font-['inter'] text-[clamp(1.25rem,2vw,2.25rem)] text-left">
                    RSVP now!
                </h1>
                <h1 class="text-white font-regualr font-['inter'] text-[clamp(1.25rem,2vw,2.25rem)] text-left">
                    Also join <a class="text-blue-500" href="https://hackclub.slack.com/archives/C09AYLTER8R">#hackroute</a> on slack :D
                </h1>
            </div>
        <h1 class="bg-[#111111] text-white text-2xl font-['Inter'] font-semibold tracking-tight px-4 m-4 border-b border-gray-600">
            FAQ
        </h1>
        </div>
        <div class="flex flex-col items-center">
             <details class="border-b w-[97%] ml-4 mr-4">
                <summary class="cursor-pointer p-4 font-medium font-['Inter'] bg-blue-500 text-white rounded">
                    How do I use transit APIs?/How do I get info from transit agencies?
                </summary>
                <h1 class="p-4 text-white font-['inter'] font-semibold">
                    Most transit APIs use <a class="text-blue-500" href="https://en.wikipedia.org/wiki/GTFS">GTFS</a> (General Transit Feed Specification), or if you want real time info, GTFS-rt (rt for realtime). <br> GTFS should come in a ZIP, and when unzipped, contain .txt files (which are actually csv files!) <br> Parse using whatever your language uses for csv parsing from there, and extract data! <br> <br>GTFS-rt is harder to parse as it uses .proto and <a class="text-blue-500" href="https://developers.google.com/transit/gtfs-realtime/">works differently</a>! Some libraries may help, but I recommend looking at docs (especially <a class="text-blue-500" href="https://developers.google.com/transit/gtfs-realtime/"> Google's docs</a>) for help! <br> You will also certainly find <a class="text-blue-500" href="https://gtfs.org/resources/producing-data/">this</a> useful, as it contains many libraries for GTFS parsing! <br> Finally, <strong>I highly recommend you read</strong> <a class="text-blue-500" href="https://carto.com/blog/gtfs-data">this</a> blog post, it is extremely helpful and walks you through more about what GTFS is, contains, and where the data can be found! <br> psst, you may also want to check if your local transit system runs a developer API :3c
                </h1>
            </details>
            <details class="border-b w-[97%] ml-4 mr-4">
                <summary class="cursor-pointer p-4 font-medium font-['Inter'] bg-blue-500 text-white rounded">
                    Do you have any examples?
                </summary>
                <h1 class="p-4 text-white font-['inter'] font-semibold">
                    Yea! It's called KnoWMATA (because it's WMATA), and it is a very simple website demonstrating a few features (check the backend!) <br> Find the GitHub <a class="text-blue-500" href="https://github.com/thisiscid/KnoWMATA">here</a>!
                </h1>
            </details>
            <details class="border-b w-[97%] ml-4 mr-4">
                <summary class="cursor-pointer p-4 font-medium font-['Inter'] bg-blue-500 text-white rounded">
                    Hey, what exactly can I submit?
                </summary>
                <h1 class="p-4 text-white font-['inter'] font-semibold">
                    Good question! As long as its accessible on mobile, gamifies transit, and uses real data and can be played in real life, you are free to submit it! (and if you can find a way to involve planes, then that's super silly and you can totally submit it :D) <br> it's highly recommended to do an app that utilizes your local transit system (for ease of demonstrating that it works), but if not, it is 100% okay to have data from another system (and have your app work in that system!)
                </h1>
            </details>
            <details class="border-b w-[97%] ml-4 mr-4">
                <summary class="cursor-pointer p-4 font-medium font-['Inter'] bg-blue-500 text-white rounded">
                    What will the merch look like?
                </summary>
                <h1 class="p-4 text-white font-['inter'] font-semibold">
                    Some examples are the line indicators right on this website (stickers)! There'll also be stuff like a RFID card themed like a DRHC (Democratic Republoc of Hack Club) Card, and other stickers too! Another option are grants for you to use in your local transit system!
                </h1>
                <h1 class="p-4 text-white font-['inter'] font-semibold">
                    You can also choose to have us buy merch for you! (rate is 5$/hour tentatively as thats the general guideline)
                </h1>
            </details>

            <details class="border-b w-[97%] ml-4 mr-4">
                <summary class="cursor-pointer p-4 font-medium font-['Inter'] bg-blue-500 text-white rounded">
                    How do I participate?
                </summary>
                <h1 class="p-4 text-white font-['inter'] font-semibold">
                    Join #hackroute and RSVP!
                </h1>
            </details>

            <details class="border-b w-[97%] ml-4 mr-4">
                <summary class="cursor-pointer p-4 font-medium font-['Inter'] bg-blue-500 text-white rounded">
                    What counts as transit?
                </summary>
                <h1 class="p-4 text-white font-['inter'] font-semibold">
                    Public transit + planes! If you have another form of transit in mind dm @niko on slack to see if you can use it!
                </h1>
            </details>
        </div>
        <div class="bg-[#111111]">
            <div class="flex justify-between border-b border-gray-600 px-4 m-4">
            <h1 class="bg-[#111111] text-white text-2xl font-['Inter'] font-semibold tracking-tight">
                Idea generator
            </h1>
            
        </div>
        <div class="p-4 m-4">
            <div class="flex items-center justify-between">
                <div class="flex-col items-center space-x-4">
                    <h1 id="idea-1" class="text-white font-semibold font-['inter'] text-xl">
                        
                    </h1>
                    <h1 id="idea-2" class="text-white font-semibold font-['inter'] text-xl">
                        
                    </h1>
                    <h1 id="idea-3" class="text-white font-semibold font-['inter'] text-xl">
                        
                    </h1>
                </div>
                <button id="idea-btn" class="text-3xl bg-blue-500 hover:bg-blue-400 text-white font-bold py-4 px-20 border-b-4 border-blue-700 hover:border-blue-500 rounded" >
                    Generate idea!
                </button>
            </div>
        </div>
        <div class="bg-[#111111]">
            <div class="flex justify-between border-b border-gray-600 px-4 m-4">
            <h1 class="bg-[#111111] text-white text-2xl font-['Inter'] font-semibold tracking-tight">
                Next Trains
            </h1>
            <h1 class="bg-[#111111] text-white text-2xl font-['Inter'] font-semibold tracking-tight">
                Status
            </h1>
        </div>
        <div class="bg-blue-500 flex items-center mx-auto my-6 max-w-[97%] rounded-lg shadow-lg p-4">
            <img 
                width="140"
                class="ml-16"
                id="icon-2">
            <div class="flex flex-col ml-20">
                <h1 id="direction-2" class="text-white text-4xl font-semibold font-['inter']">

                </h1>
                <h1 id="towards-2" class="text-white font-semibold font-['inter']">

                </h1>
            </div>
            <div class="flex flex-col ml-auto">
                <h1 id="status-2" class="text-white font-semibold font-['inter'] text-4xl">

                </h1>
                <h1 id="status-extra-2" class="text-white font-semibold font-['inter'] text-right">

                </h1>
            </div>
        </div>
        <div class="bg-blue-500 flex items-center mx-auto my-6 max-w-[97%] rounded-lg shadow-lg p-4">
            <img src="https://hc-cdn.hel1.your-objectstorage.com/s/v3/d767e88af441ca4156e4a0884498e031c0a11289_outermetro_connect.svg"
                width="140"
                alt="Teal box with a red circle containing a 1 on the middle left, the words line 1 on the middle right, and OuterMetro Connect centered below the middle."
                class="ml-16"
                id="icon-3">
            <div class="flex flex-col ml-20">
                <h1 id="direction-3" class="text-white text-4xl font-semibold font-['inter']">
                    
                </h1>
                <h1 id="towards-3" class="text-white font-semibold font-['inter']">
                    
                </h1>
            </div>
            <div class="flex flex-col ml-auto">
                <h1 id="status-3" class="text-white font-semibold font-['inter'] text-4xl">
                    
                </h1>
                <h1 id="status-extra-3" class="text-white font-semibold font-['inter'] text-right">

                </h1>
            </div>
        </div>
        <footer class="bg-[#111111] text-gray-400 text-xs py-4 border-gray-700">
            <div class="max-w-screen-xl mx-auto px-4 flex flex-col items-center justify-center text-center text-white font-['Inter']">
                <p class="text-xs">Operated by Hackpines Transit Authority - Democratic Republic of Hack Club</p>
            </div>
        </footer>
    </div>
</body>

<script type="text/python">
import random
from browser import document, html

southbound_construction=False
lines=[
        {"direction": "Eastbound", "towards": "Latta International Airport | No Connections", "img": "https://hc-cdn.hel1.your-objectstorage.com/s/v3/d35b71f1b12143d8208d0a77b3b22cf056b59430_klai_express.svg", "alt": "Round, teal box with the words 'Line S1' inside, an airplane icon beside it, and the words HACK Express beneath."},
        {"direction": "Northbound", "towards": "to Codium Central | Connnections to Light Rail @ Codium Central", "img": "https://hc-cdn.hel1.your-objectstorage.com/s/v3/d767e88af441ca4156e4a0884498e031c0a11289_outermetro_connect.svg", "alt": "Teal box with a red circle containing a 1 on the middle left, the words line 1 on the middle right, and OuterMetro Connect centered below the middle."},
        {"direction": "Southbound", "towards": "to Junya St | Via Cyrillic St., Connections to S2 @ Valerie Sq.", "img": "https://hc-cdn.hel1.your-objectstorage.com/s/v3/d767e88af441ca4156e4a0884498e031c0a11289_outermetro_connect.svg", "alt": "Teal box with a red circle containing a 1 on the middle left, the words line 1 on the middle right, and OuterMetro Connect centered below the middle."},
        {"direction": "Southbound", "towards": "to Cyrillic St. | Terminates early due to construction", "img": "https://hc-cdn.hel1.your-objectstorage.com/s/v3/d767e88af441ca4156e4a0884498e031c0a11289_outermetro_connect.svg", "alt": "Teal box with a red circle containing a 1 on the middle left, the words line 1 on the middle right, and OuterMetro Connect centered below the middle."},
        {"direction": "Clockwise", "towards": "via loop | Does not terminate", "img": "https://hc-cdn.hel1.your-objectstorage.com/s/v3/29f513f8d6f71619924b1664de1878807331ef08_line_2-metro_orbital.svg", "alt": "Teal box with a green circle containing a 2 on the middle left, the words line 2 on the middle right, and Metro Orbital centered below the middle."},
        {"direction": "Counterclockwise", "towards": "via loop | Does not terminate", "img": "https://hc-cdn.hel1.your-objectstorage.com/s/v3/29f513f8d6f71619924b1664de1878807331ef08_line_2-metro_orbital.svg", "alt": "Teal box with a green circle containing a 2 on the middle left, the words line 2 on the middle right, and Metro Orbital centered below the middle."},
        {"direction": "Clockwise", "towards": "to Valerie Pl. | Special service, terminates early", "img": "https://hc-cdn.hel1.your-objectstorage.com/s/v3/29f513f8d6f71619924b1664de1878807331ef08_line_2-metro_orbital.svg", "alt": "Teal box with a green circle containing a 2 on the middle left, the words line 2 on the middle right, and Metro Orbital centered below the middle."}
]
ids=[1,2, 3]
idea_button = document["idea-btn"]

def get_random_transport(click):
    transport_modes = ["subway", "bus", "regional rail", "bike share"]
    transport_goals = ["reach the farthest terminus", "beat the peak-hour timer", "complete a color-loop", "optimize fare spend", "least transfers", "hit all wheelchair-accessible stops only", "transfer at least N times", "hunt for a station with clues from GTFS"]
    transport_interaction = ["co-op", "versus", "team versus"]
    mode=random.choice(transport_modes)
    goal=random.choice(transport_goals)
    interaction=random.choice(transport_interaction)
    document["idea-1"].text = f"The goal of your game is {goal}!"
    document["idea-2"].text = f"The transit mode of your game is {mode}!"
    document["idea-3"].text = f"Your game type is going to be {interaction}!"

def get_random_status(southbound_construction):
    car_choices = [4, 6, 8]
    speed_choices = ["Express", "Local", "Limited", "Special"]
    time_choices = [3, 4, 5, 6, 7, 8]
    time = random.choice(time_choices)
    car_number = random.choice(car_choices)
    speed_number = random.choice(speed_choices)
    return {"time": time, "car_number": car_number, "speed_number": speed_number}

def next_trains_status():
    time_choices = ["ARR", 1, 2]
    return random.choice(time_choices)

idea_button.bind("click", get_random_transport)

for i in ids:
    line=random.choice(lines)
    status=get_random_status(southbound_construction)
    while "to Junya St" in line["towards"] and southbound_construction:
        line=random.choice(lines)
    if "construction" in line["towards"]:
        status["speed_number"] = "Special"
        southbound_construction = True
    document[f"icon-{i}"].src = line["img"]
    document[f"icon-{i}"].attrs["alt"] = line["alt"]
    document[f"direction-{i}"].text = line["direction"]
    document[f"towards-{i}"].text = line["towards"]
    if "Latta International Airport" in line["towards"]:
        status["speed_number"] = "Express"
    if i == 1:
        status["time"] = next_trains_status()
    if isinstance(status["time"], str):
        document[f"status-{i}"].text = status["time"]
    else:
        document[f"status-{i}"].text = str(status["time"]) + " MIN"
    document[f"status-extra-{i}"].html = f'{status["car_number"]} <i class="fa-solid fa-train"></i> | {status["speed_number"]}'

</script>
